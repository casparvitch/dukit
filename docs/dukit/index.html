<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>dukit API documentation</title>
<meta name="description" content="Package for the analysis of (widefield) defect microscopy image data, from the Tetienne
lab at RMIT/UniMelb. For the lab control software see
â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid silver}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Package <code>dukit</code></h1>
</header>
<section id="section-intro">
<p>Package for the analysis of (widefield) defect microscopy image data, from the Tetienne
lab at RMIT/UniMelb. For the lab control software see
<a href="https://github.com/DavidBroadway/qdm-control">DavidBroadway/qdm-control</a>
(may not be public, talk to David Broadway).</p>
<p>On this page we will document the API, for other information see the README.md,
INSTALL.md and DEVDOCS.md (@ repo link below), or click through the sub-package links below.</p>
<p>See the examples folder (@ repo link below) for nice examples of usage.</p>
<p><a href="https://github.com/casparvitch/dukit">Repository here</a></p>
<p><a href="https://casparvitch.github.io/dukit/dukit/index.html">Docs here</a></p>
<h1 id="dukit-public-api">DUKIT Public API</h1>
<h3 id="systems-dukitsystems">Systems (<code><a title="dukit.systems" href="systems.html">dukit.systems</a></code>)</h3>
<p>Objects that define the hardware and software configuration of a microscope, and hold
the system-specific methods for reading data from the disk. The <code>System</code> class is
abstract, and the other classes inherit from it. The <code>System</code> class is not intended to
be instantiated directly, but rather to be subclassed. If you are from another group,
the only thing you should need to do (in the whole package) is write your own
System sub-class.</p>
<ul>
<li><code><a title="dukit.systems.System" href="systems.html#dukit.systems.System">System</a></code></li>
<li><code><a title="dukit.systems.MelbSystem" href="systems.html#dukit.systems.MelbSystem">MelbSystem</a></code></li>
<li><code><a title="dukit.systems.LVControl" href="systems.html#dukit.systems.LVControl">LVControl</a></code></li>
<li><code><a title="dukit.systems.PyControl" href="systems.html#dukit.systems.PyControl">PyControl</a></code></li>
<li><code><a title="dukit.systems.Zyla" href="systems.html#dukit.systems.Zyla">Zyla</a></code></li>
<li><code><a title="dukit.systems.CryoWidefield" href="systems.html#dukit.systems.CryoWidefield">CryoWidefield</a></code></li>
<li><code><a title="dukit.systems.LegacyCryoWidefield" href="systems.html#dukit.systems.LegacyCryoWidefield">LegacyCryoWidefield</a></code></li>
<li><code><a title="dukit.systems.Argus" href="systems.html#dukit.systems.Argus">Argus</a></code></li>
<li><code><a title="dukit.systems.LegacyArgus" href="systems.html#dukit.systems.LegacyArgus">LegacyArgus</a></code></li>
<li><code><a title="dukit.systems.PyCryoWidefield" href="systems.html#dukit.systems.PyCryoWidefield">PyCryoWidefield</a></code></li>
</ul>
<h4 id="system-methods">System methods</h4>
<ul>
<li><code><a title="dukit.systems.System.read_image" href="systems.html#dukit.systems.System.read_image">System.read_image()</a></code></li>
<li><code><a title="dukit.systems.System.get_hardware_binning" href="systems.html#dukit.systems.System.get_hardware_binning">System.get_hardware_binning()</a></code></li>
<li><code><a title="dukit.systems.System.read_sweep_arr" href="systems.html#dukit.systems.System.read_sweep_arr">System.read_sweep_arr()</a></code></li>
<li><code><a title="dukit.systems.System.get_raw_pixel_size" href="systems.html#dukit.systems.System.get_raw_pixel_size">System.get_raw_pixel_size()</a></code></li>
<li><code><a title="dukit.systems.System.get_bias_field" href="systems.html#dukit.systems.System.get_bias_field">System.get_bias_field()</a></code></li>
<li><code><a title="dukit.systems.System.norm" href="systems.html#dukit.systems.System.norm">System.norm()</a></code></li>
</ul>
<h3 id="working-with-images-dukititool">Working with images (<code><a title="dukit.itool" href="itool.html">dukit.itool</a></code>)</h3>
<ul>
<li><code><a title="dukit.itool.mpl_set_run_config" href="itool.html#dukit.itool.mpl_set_run_config">mpl_set_run_config()</a></code><ul>
<li>Set matplotlib rcParams to standardise style of plots.</li>
</ul>
</li>
<li><code><a title="dukit.itool.crop_sweep" href="itool.html#dukit.itool.crop_sweep">crop_sweep()</a></code><ul>
<li>Crop in frequency/tau direction.</li>
</ul>
</li>
<li><code><a title="dukit.itool.crop_roi" href="itool.html#dukit.itool.crop_roi">crop_roi()</a></code><ul>
<li>Crop to region of interest.</li>
</ul>
</li>
<li><code><a title="dukit.itool.smooth_image_stack" href="itool.html#dukit.itool.smooth_image_stack">smooth_image_stack()</a></code><ul>
<li>Smooth image stack in-frame, doesn't change number of pixels. Can be asymmetric.</li>
</ul>
</li>
<li><code><a title="dukit.itool.rebin_image_stack" href="itool.html#dukit.itool.rebin_image_stack">rebin_image_stack()</a></code><ul>
<li>Rebin image stack in-frame, does change number of pixels. Can be asymmetric.</li>
</ul>
</li>
<li><code><a title="dukit.itool.sum_spatially" href="itool.html#dukit.itool.sum_spatially">sum_spatially()</a></code><ul>
<li>Sum an image spatially</li>
</ul>
</li>
<li><code><a title="dukit.itool.get_im_filtered" href="itool.html#dukit.itool.get_im_filtered">get_im_filtered()</a></code><ul>
<li>Filter an image - currently only gaussian filtering is implemented.</li>
</ul>
</li>
<li><code><a title="dukit.itool.get_background" href="itool.html#dukit.itool.get_background">get_background()</a></code><ul>
<li>Get background of an image - many different kinds, see function docs.</li>
</ul>
</li>
<li><code><a title="dukit.itool.get_colormap_range" href="itool.html#dukit.itool.get_colormap_range">get_colormap_range()</a></code><ul>
<li>Calculate a colormap range for an image. Many kinds, see function docs.</li>
</ul>
</li>
<li><code><a title="dukit.itool.plot_image" href="itool.html#dukit.itool.plot_image">plot_image()</a></code><ul>
<li>Base image plotter.</li>
</ul>
</li>
<li><code><a title="dukit.itool.plot_image_on_ax" href="itool.html#dukit.itool.plot_image_on_ax">plot_image_on_ax()</a></code><ul>
<li>As above, but onto axis already created.</li>
</ul>
</li>
<li><code><a title="dukit.itool.mask_polygons" href="itool.html#dukit.itool.mask_polygons">mask_polygons()</a></code><ul>
<li>Mask region of image by polygons (see <code><a title="dukit.polygon" href="polygon.html">dukit.polygon</a></code> module)</li>
</ul>
</li>
<li><code><a title="dukit.itool.mu_sigma_inside_polygons" href="itool.html#dukit.itool.mu_sigma_inside_polygons">mu_sigma_inside_polygons()</a></code><ul>
<li>Calculate mean and standard deviation inside polygons.</li>
</ul>
</li>
<li><code><a title="dukit.itool.get_aois" href="itool.html#dukit.itool.get_aois">get_aois()</a></code><ul>
<li>Get areas of interest from AOI coords tuple(s).</li>
</ul>
</li>
</ul>
<h3 id="pl-fitting-dukitpl">PL fitting (<code><a title="dukit.pl" href="pl/index.html">dukit.pl</a></code>)</h3>
<ul>
<li><code><a title="dukit.pl.model.FitModel" href="pl/model.html#dukit.pl.model.FitModel">FitModel</a></code><ul>
<li>Base class for PL fitting models. Subclass this to make your own.</li>
</ul>
</li>
<li><code><a title="dukit.pl.model.ConstStretchedExp" href="pl/model.html#dukit.pl.model.ConstStretchedExp">ConstStretchedExp</a></code><ul>
<li>T1 model.</li>
</ul>
</li>
<li><code><a title="dukit.pl.model.ConstDampedRabi" href="pl/model.html#dukit.pl.model.ConstDampedRabi">ConstDampedRabi</a></code><ul>
<li>Rabi model, constant + damped oscillation.</li>
</ul>
</li>
<li><code><a title="dukit.pl.model.LinearLorentzians" href="pl/model.html#dukit.pl.model.LinearLorentzians">LinearLorentzians</a></code><ul>
<li>Linear combination of lorentzians, in init pass number of lorentzians.</li>
</ul>
</li>
<li><code><a title="dukit.pl.model.ConstLorentzians" href="pl/model.html#dukit.pl.model.ConstLorentzians">ConstLorentzians</a></code><ul>
<li>As above, but with constant background.</li>
</ul>
</li>
<li><code><a title="dukit.pl.interface.fit_all_pixels" href="pl/interface.html#dukit.pl.interface.fit_all_pixels">fit_all_pixels()</a></code><ul>
<li>Fit all pixels in an image stack.</li>
</ul>
</li>
<li><code><a title="dukit.pl.interface.fit_roi" href="pl/interface.html#dukit.pl.interface.fit_roi">fit_roi()</a></code><ul>
<li>Fit ROI average spectrum.</li>
</ul>
</li>
<li><code><a title="dukit.pl.interface.fit_aois" href="pl/interface.html#dukit.pl.interface.fit_aois">fit_aois()</a></code><ul>
<li>Fit AOI average spectra.</li>
</ul>
</li>
<li><code><a title="dukit.pl.interface.load_fit_results" href="pl/interface.html#dukit.pl.interface.load_fit_results">load_fit_results()</a></code><ul>
<li>Load fit results from file.</li>
</ul>
</li>
</ul>
<h3 id="field-calculations-dukitfield">Field calculations (<code><a title="dukit.field" href="field/index.html">dukit.field</a></code>)</h3>
<p>Currently only calculating local field(s) (not vector field)</p>
<ul>
<li><code><a title="dukit.field.defects.Defect" href="field/defects.html#dukit.field.defects.Defect">Defect</a></code><ul>
<li>Base class for defects.</li>
</ul>
</li>
<li><code><a title="dukit.field.defects.SpinOne" href="field/defects.html#dukit.field.defects.SpinOne">SpinOne</a></code><ul>
<li>Spin-1 defects general class.</li>
</ul>
</li>
<li><code><a title="dukit.field.defects.NVEnsemble" href="field/defects.html#dukit.field.defects.NVEnsemble">NVEnsemble</a></code><ul>
<li>NV ensemble.</li>
</ul>
</li>
<li><code><a title="dukit.field.defects.VBEnsemble" href="field/defects.html#dukit.field.defects.VBEnsemble">VBEnsemble</a></code><ul>
<li>VB ensemble.</li>
</ul>
</li>
<li><code><a title="dukit.field.defects.SpinPair" href="field/defects.html#dukit.field.defects.SpinPair">SpinPair</a></code><ul>
<li>Spin pair general class.</li>
</ul>
</li>
<li><code><a title="dukit.field.defects.CPairEnsemble" href="field/defects.html#dukit.field.defects.CPairEnsemble">CPairEnsemble</a></code><ul>
<li>C_? spin pair ensemble. I.e. visible emitter.</li>
</ul>
</li>
</ul>
<h4 id="defect-methods">Defect methods:</h4>
<ul>
<li><code><a title="dukit.field.defects.Defect.b_defects" href="field/defects.html#dukit.field.defects.Defect.b_defects">Defect.b_defects()</a></code></li>
<li><code><a title="dukit.field.defects.Defect.dshift_defects" href="field/defects.html#dukit.field.defects.Defect.dshift_defects">Defect.dshift_defects()</a></code></li>
</ul>
<h3 id="drift-correction-dukitdriftcorrect">Drift correction (<code><a title="dukit.driftcorrect" href="driftcorrect.html">dukit.driftcorrect</a></code>)</h3>
<ul>
<li><code><a title="dukit.driftcorrect.drift_correct_test" href="driftcorrect.html#dukit.driftcorrect.drift_correct_test">drift_correct_test()</a></code><ul>
<li>Test drift correction params.</li>
</ul>
</li>
<li><code><a title="dukit.driftcorrect.drift_correct_measurement" href="driftcorrect.html#dukit.driftcorrect.drift_correct_measurement">drift_correct_measurement()</a></code><ul>
<li>Apply drift correction to image_stack &amp; save output binary.</li>
</ul>
</li>
</ul>
<h3 id="magnetic-sample-simulation-dukitmagsim">Magnetic sample simulation (<code><a title="dukit.magsim" href="magsim.html">dukit.magsim</a></code>)</h3>
<ul>
<li><code><a title="dukit.magsim.SandboxMagSim" href="magsim.html#dukit.magsim.SandboxMagSim">SandboxMagSim</a></code><ul>
<li>Play in an empty sandbox.</li>
</ul>
</li>
<li><code><a title="dukit.magsim.ComparisonMagSim" href="magsim.html#dukit.magsim.ComparisonMagSim">ComparisonMagSim</a></code><ul>
<li>For comparison with a real magnetic field image, to match sim &lt;-&gt; exp.</li>
</ul>
</li>
</ul>
<h3 id="plotting-dukitplot">Plotting (<code><a title="dukit.plot" href="plot.html">dukit.plot</a></code>)</h3>
<p>Need to be imported via <code>dukit.plot.&lt;method&gt;</code> to work properly.</p>
<ul>
<li><code><a title="dukit.plot.roi_pl_image" href="plot.html#dukit.plot.roi_pl_image">roi_pl_image()</a></code></li>
<li><code><a title="dukit.plot.aoi_pl_image" href="plot.html#dukit.plot.aoi_pl_image">aoi_pl_image()</a></code></li>
<li><code><a title="dukit.plot.roi_avg_fits" href="plot.html#dukit.plot.roi_avg_fits">roi_avg_fits()</a></code></li>
<li><code><a title="dukit.plot.aoi_spectra" href="plot.html#dukit.plot.aoi_spectra">aoi_spectra()</a></code></li>
<li><code><a title="dukit.plot.aoi_spectra_fit" href="plot.html#dukit.plot.aoi_spectra_fit">aoi_spectra_fit()</a></code></li>
<li><code><a title="dukit.plot.pl_param_image" href="plot.html#dukit.plot.pl_param_image">pl_param_image()</a></code></li>
<li><code><a title="dukit.plot.pl_param_images" href="plot.html#dukit.plot.pl_param_images">pl_param_images()</a></code></li>
</ul>
<h3 id="some-matplotlib-interactive-widgets-dukitwidget">Some matplotlib interactive widgets (<code><a title="dukit.widget" href="widget.html">dukit.widget</a></code>)</h3>
<ul>
<li><code><a title="dukit.widget.LineSelector" href="widget.html#dukit.widget.LineSelector">LineSelector</a></code><ul>
<li>Use via <code><a title="dukit.widget.LinecutSelectionWidget" href="widget.html#dukit.widget.LinecutSelectionWidget">LinecutSelectionWidget</a></code> below.</li>
</ul>
</li>
<li><code><a title="dukit.widget.PolygonSelector" href="widget.html#dukit.widget.PolygonSelector">PolygonSelector</a></code><ul>
<li>Use via <code><a title="dukit.polygon.PolygonSelectionWidget" href="polygon.html#dukit.polygon.PolygonSelectionWidget">PolygonSelectionWidget</a></code> below.</li>
</ul>
</li>
<li><code><a title="dukit.widget.LinecutSelectionWidget" href="widget.html#dukit.widget.LinecutSelectionWidget">LinecutSelectionWidget</a></code><ul>
<li>Simple linecut selection tool.</li>
</ul>
</li>
<li><code><a title="dukit.widget.BulkLinecutWidget" href="widget.html#dukit.widget.BulkLinecutWidget">BulkLinecutWidget</a></code><ul>
<li>Linecut selection tool for multiple images, but in same slice.</li>
</ul>
</li>
</ul>
<h3 id="polygon-regions-of-image-very-useful-dukitpolygon">Polygon regions of image, very useful! (<code><a title="dukit.polygon" href="polygon.html">dukit.polygon</a></code>)</h3>
<ul>
<li><code><a title="dukit.polygon.Polygon" href="polygon.html#dukit.polygon.Polygon">Polygon</a></code><ul>
<li>Polygon object, with various useful methods.</li>
</ul>
</li>
<li><code><a title="dukit.polygon.PolygonSelectionWidget" href="polygon.html#dukit.polygon.PolygonSelectionWidget">PolygonSelectionWidget</a></code><ul>
<li>Widget allowing you to select polygons on an image.</li>
</ul>
</li>
<li><code><a title="dukit.polygon.polygon_selector" href="polygon.html#dukit.polygon.polygon_selector">polygon_selector()</a></code><ul>
<li>GUI interface.</li>
</ul>
</li>
<li><code><a title="dukit.polygon.load_polygon_nodes" href="polygon.html#dukit.polygon.load_polygon_nodes">load_polygon_nodes()</a></code><ul>
<li>Load polygon nodes from file.</li>
</ul>
</li>
</ul>
<h3 id="fourier-tooling-dukitfourier">Fourier tooling (<code><a title="dukit.fourier" href="fourier.html">dukit.fourier</a></code>)</h3>
<p>Currently unused I think, will be useful for vector mag, source recon etc. so leaving
in place.</p>
<ul>
<li><code><a title="dukit.fourier.define_k_vectors" href="fourier.html#dukit.fourier.define_k_vectors">define_k_vectors()</a></code><ul>
<li>Allows asymmetric shape, but haven't tested that yet.</li>
</ul>
</li>
<li><code><a title="dukit.fourier.hanning_filter_kspace" href="fourier.html#dukit.fourier.hanning_filter_kspace">hanning_filter_kspace()</a></code><ul>
<li>Smooth fourier operations below resolvable dimensions, to not amplify noise.</li>
</ul>
</li>
<li><code><a title="dukit.fourier.define_current_transform" href="fourier.html#dukit.fourier.define_current_transform">define_current_transform()</a></code></li>
<li><code><a title="dukit.fourier.define_magnetization_transformation" href="fourier.html#dukit.fourier.define_magnetization_transformation">define_magnetization_transformation()</a></code></li>
<li><code><a title="dukit.fourier.pad_image" href="fourier.html#dukit.fourier.pad_image">pad_image()</a></code></li>
<li><code><a title="dukit.fourier.unpad_image" href="fourier.html#dukit.fourier.unpad_image">unpad_image()</a></code></li>
<li><code><a title="dukit.fourier.MAG_UNIT_CONV" href="fourier.html#dukit.fourier.MAG_UNIT_CONV">MAG_UNIT_CONV</a></code><ul>
<li>Convert between units of magnetization.</li>
</ul>
</li>
<li><code><a title="dukit.fourier.MU_0" href="fourier.html#dukit.fourier.MU_0">MU_0</a></code><ul>
<li>Vacuum permeability.</li>
</ul>
</li>
</ul>
<h3 id="other-dukitshare">Other (<code><a title="dukit.share" href="share.html">dukit.share</a></code>)</h3>
<ul>
<li><code><a title="dukit.share.RoiAvgFit" href="share.html#dukit.share.RoiAvgFit">RoiAvgFit</a></code><ul>
<li>Result from ROI average fit(s).</li>
</ul>
</li>
<li><code><a title="dukit.share.AoiAvgFit" href="share.html#dukit.share.AoiAvgFit">AoiAvgFit</a></code><ul>
<li>Result from AOI average fit(s).</li>
</ul>
</li>
</ul>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># -*- coding: utf-8 -*-
&#34;&#34;&#34;
Package for the analysis of (widefield) defect microscopy image data, from the Tetienne
lab at RMIT/UniMelb. For the lab control software see
[DavidBroadway/qdm-control](https://github.com/DavidBroadway/qdm-control)
(may not be public, talk to David Broadway).

On this page we will document the API, for other information see the README.md,
INSTALL.md and DEVDOCS.md (@ repo link below), or click through the sub-package links below.

See the examples folder (@ repo link below) for nice examples of usage.

[Repository here](https://github.com/casparvitch/dukit)

[Docs here](https://casparvitch.github.io/dukit/dukit/index.html)

# DUKIT Public API

### Systems (`dukit.systems`)

Objects that define the hardware and software configuration of a microscope, and hold
the system-specific methods for reading data from the disk. The `System` class is
abstract, and the other classes inherit from it. The `System` class is not intended to
be instantiated directly, but rather to be subclassed. If you are from another group,
the only thing you should need to do (in the whole package) is write your own
System sub-class.

- `dukit.systems.System`
- `dukit.systems.MelbSystem`
- `dukit.systems.LVControl`
- `dukit.systems.PyControl`
- `dukit.systems.Zyla`
- `dukit.systems.CryoWidefield`
- `dukit.systems.LegacyCryoWidefield`
- `dukit.systems.Argus`
- `dukit.systems.LegacyArgus`
- `dukit.systems.PyCryoWidefield`

#### System methods

- `dukit.systems.System.read_image`
- `dukit.systems.System.get_hardware_binning`
- `dukit.systems.System.read_sweep_arr`
- `dukit.systems.System.get_raw_pixel_size`
- `dukit.systems.System.get_bias_field`
- `dukit.systems.System.norm`

### Working with images (`dukit.itool`)

- `dukit.itool.mpl_set_run_config`
    - Set matplotlib rcParams to standardise style of plots.
- `dukit.itool.crop_sweep`
    - Crop in frequency/tau direction.
- `dukit.itool.crop_roi`
    - Crop to region of interest.
- `dukit.itool.smooth_image_stack`
    - Smooth image stack in-frame, doesn&#39;t change number of pixels. Can be asymmetric.
- `dukit.itool.rebin_image_stack`
    - Rebin image stack in-frame, does change number of pixels. Can be asymmetric.
- `dukit.itool.sum_spatially`
    - Sum an image spatially
- `dukit.itool.get_im_filtered`
    - Filter an image - currently only gaussian filtering is implemented.
- `dukit.itool.get_background`
    - Get background of an image - many different kinds, see function docs.
- `dukit.itool.get_colormap_range`
    - Calculate a colormap range for an image. Many kinds, see function docs.
- `dukit.itool.plot_image`
    - Base image plotter.
- `dukit.itool.plot_image_on_ax`
    - As above, but onto axis already created.
- `dukit.itool.mask_polygons`
    - Mask region of image by polygons (see `dukit.polygon` module)
- `dukit.itool.mu_sigma_inside_polygons`
    - Calculate mean and standard deviation inside polygons.
- `dukit.itool.get_aois`
    - Get areas of interest from AOI coords tuple(s).

### PL fitting (`dukit.pl`)

- `dukit.pl.model.FitModel`
    - Base class for PL fitting models. Subclass this to make your own.
- `dukit.pl.model.ConstStretchedExp`
    - T1 model.
- `dukit.pl.model.ConstDampedRabi`
    - Rabi model, constant + damped oscillation.
- `dukit.pl.model.LinearLorentzians`
    - Linear combination of lorentzians, in init pass number of lorentzians.
- `dukit.pl.model.ConstLorentzians`
    - As above, but with constant background.
- `dukit.pl.interface.fit_all_pixels`
    - Fit all pixels in an image stack.
- `dukit.pl.interface.fit_roi`
    - Fit ROI average spectrum.
- `dukit.pl.interface.fit_aois`
    - Fit AOI average spectra.
- `dukit.pl.interface.load_fit_results`
    - Load fit results from file.

### Field calculations (`dukit.field`)

Currently only calculating local field(s) (not vector field)

- `dukit.field.defects.Defect`
    - Base class for defects.
- `dukit.field.defects.SpinOne`
    - Spin-1 defects general class.
- `dukit.field.defects.NVEnsemble`
    - NV ensemble.
- `dukit.field.defects.VBEnsemble`
    - VB ensemble.
- `dukit.field.defects.SpinPair`
    - Spin pair general class.
- `dukit.field.defects.CPairEnsemble`
    - C_? spin pair ensemble. I.e. visible emitter.

#### Defect methods:

- `dukit.field.defects.Defect.b_defects`
- `dukit.field.defects.Defect.dshift_defects`

### Drift correction (`dukit.driftcorrect`)

- `dukit.driftcorrect.drift_correct_test`
    - Test drift correction params.
- `dukit.driftcorrect.drift_correct_measurement`
    - Apply drift correction to image_stack &amp; save output binary.

### Magnetic sample simulation (`dukit.magsim`)

- `dukit.magsim.SandboxMagSim`
    - Play in an empty sandbox.
- `dukit.magsim.ComparisonMagSim`
    - For comparison with a real magnetic field image, to match sim &lt;-&gt; exp.

### Plotting (`dukit.plot`)

Need to be imported via `dukit.plot.&lt;method&gt;` to work properly.

- `dukit.plot.roi_pl_image`
- `dukit.plot.aoi_pl_image`
- `dukit.plot.roi_avg_fits`
- `dukit.plot.aoi_spectra`
- `dukit.plot.aoi_spectra_fit`
- `dukit.plot.pl_param_image`
- `dukit.plot.pl_param_images`

### Some matplotlib interactive widgets (`dukit.widget`)

- `dukit.widget.LineSelector`
    - Use via `dukit.widget.LinecutSelectionWidget` below.
- `dukit.widget.PolygonSelector`
    - Use via `dukit.polygon.PolygonSelectionWidget` below.
- `dukit.widget.LinecutSelectionWidget`
    - Simple linecut selection tool.
- `dukit.widget.BulkLinecutWidget`
    - Linecut selection tool for multiple images, but in same slice.

### Polygon regions of image, very useful! (`dukit.polygon`)

- `dukit.polygon.Polygon`
    - Polygon object, with various useful methods.
- `dukit.polygon.PolygonSelectionWidget`
    - Widget allowing you to select polygons on an image.
- `dukit.polygon.polygon_selector`
    - GUI interface.
- `dukit.polygon.load_polygon_nodes`
    - Load polygon nodes from file.

### Fourier tooling (`dukit.fourier`)

Currently unused I think, will be useful for vector mag, source recon etc. so leaving
in place.

- `dukit.fourier.define_k_vectors`
    - Allows asymmetric shape, but haven&#39;t tested that yet.
- `dukit.fourier.hanning_filter_kspace`
    - Smooth fourier operations below resolvable dimensions, to not amplify noise.
- `dukit.fourier.define_current_transform`
- `dukit.fourier.define_magnetization_transformation`
- `dukit.fourier.pad_image`
- `dukit.fourier.unpad_image`
- `dukit.fourier.MAG_UNIT_CONV`
    - Convert between units of magnetization.
- `dukit.fourier.MU_0`
    - Vacuum permeability.

### Other (`dukit.share`)

- `dukit.share.RoiAvgFit`
    - Result from ROI average fit(s).
- `dukit.share.AoiAvgFit`
    - Result from AOI average fit(s).
&#34;&#34;&#34;

from ._version import __version__

from dukit.systems import (
    System,
    MelbSystem,
    LVControl,
    PyControl,
    Zyla,
    CryoWidefield,
    LegacyCryoWidefield,
    Argus,
    LegacyArgus,
    PyCryoWidefield,
)
from dukit.itool import (
    mpl_set_run_config,
    crop_sweep,
    crop_roi,
    smooth_image_stack,
    rebin_image_stack,
    sum_spatially,
    get_im_filtered,
    get_background,
    get_colormap_range,
    plot_image,
    plot_image_on_ax,
    mask_polygons,
    get_background,
    mu_sigma_inside_polygons,
    get_aois,
)

from dukit.widget import (
    LineSelector,
    PolygonSelector,
    LinecutSelectionWidget,
    BulkLinecutWidget,
)
from dukit.polygon import (
    Polygon,
    PolygonSelectionWidget,
    polygon_selector,
    load_polygon_nodes,
)

# Not useful yet, until vector field stuff is implemented
# from dukit.geom import (
#     get_unvs,
#     get_unv_frames,
#     NV_AXES_111,
#     NV_AXES_100_100,
#     NV_AXES_100_110,
# )

from dukit.fourier import (
    define_k_vectors,
    hanning_filter_kspace,
    define_current_transform,
    define_magnetization_transformation,
    pad_image,
    unpad_image,
    MAG_UNIT_CONV,
    MU_0,
)

from dukit.driftcorrect import drift_correct_test, drift_correct_measurement

from dukit.magsim import SandboxMagSim, ComparisonMagSim

from dukit.share import RoiAvgFit, AoiAvgFit

import dukit.plot

from dukit.pl import (
    FitModel,
    ConstStretchedExp,
    ConstDampedRabi,
    LinearLorentzians,
    ConstLorentzians,
    fit_all_pixels,
    fit_roi,
    fit_aois,
    load_fit_results,
)

from dukit.field import (
    Defect,
    SpinOne,
    NVEnsemble,
    VBEnsemble,
    SpinPair,
    CPairEnsemble,
)</code></pre>
</details>
</section>
<section>
<h2 class="section-title" id="header-submodules">Sub-modules</h2>
<dl>
<dt><code class="name"><a title="dukit.driftcorrect" href="driftcorrect.html">dukit.driftcorrect</a></code></dt>
<dd>
<div class="desc"><p>This module holds tools for measurement (lateral) drift correction â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.field" href="field/index.html">dukit.field</a></code></dt>
<dd>
<div class="desc"><p>Calculating the magnetic field, from ODMR data â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.fourier" href="fourier.html">dukit.fourier</a></code></dt>
<dd>
<div class="desc"><p>Shared FFTW tooling â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.geom" href="geom.html">dukit.geom</a></code></dt>
<dd>
<div class="desc"><p>This module holds tools for determining the geometry of the defect-bias field
system etc., required for retrieving/reconstructing vector fields â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.itool" href="itool.html">dukit.itool</a></code></dt>
<dd>
<div class="desc"><p>This module holds misc image tooling â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.json2dict" href="json2dict.html">dukit.json2dict</a></code></dt>
<dd>
<div class="desc"><p>json2dict; functions for loading json files to dicts and the inverse â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.magsim" href="magsim.html">dukit.magsim</a></code></dt>
<dd>
<div class="desc"><p>Interface to mag simulations â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.pl" href="pl/index.html">dukit.pl</a></code></dt>
<dd>
<div class="desc"><p>Module for fitting PL data â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.plot" href="plot.html">dukit.plot</a></code></dt>
<dd>
<div class="desc"><p>This module holds functions for plotting â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.polygon" href="polygon.html">dukit.polygon</a></code></dt>
<dd>
<div class="desc"><p>This module holds the Polygon class â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.rebin" href="rebin.html">dukit.rebin</a></code></dt>
<dd>
<div class="desc"><p>Python/NumPy implementation of IDL's rebin function â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.share" href="share.html">dukit.share</a></code></dt>
<dd>
<div class="desc"><p>Data structures/types shared between other modules â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.systems" href="systems.html">dukit.systems</a></code></dt>
<dd>
<div class="desc"><p>This sub-package holds classes and functions to define (microscope) systems â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.warn" href="warn.html">dukit.warn</a></code></dt>
<dd>
<div class="desc"><p>Warnings for DUKIT â€¦</p></div>
</dd>
<dt><code class="name"><a title="dukit.widget" href="widget.html">dukit.widget</a></code></dt>
<dd>
<div class="desc"><p>Various GUI widgets for use in the DUKIT â€¦</p></div>
</dd>
</dl>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<form>
<input id="lunr-search" name="q" placeholder="ðŸ”Ž Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.css" integrity="sha512-j1u8eUJ4f23xPPxwOrLUPQaCD2dwzNqqmDDcWS4deWsMv2ohLqmXXuP3hU7g8TyzbMSakP/mMqoNBYWj8AEIFg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.js" integrity="sha512-plGUER9JkeEWPPqQBE4sdLqBoQug5Ap+BCGMc7bJ8BXkm+VVj6QzkpBz5Yv2yPkkq+cqg9IpkBaGCas6uDbW8g==" crossorigin></script>
<style>
.modal-dialog iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-dialog iframe {
width: 70vw;
height: 80vh;
}
}
.modal-dialog .tingle-modal-box {width: auto;}
.modal-dialog .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = '../doc-search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-dialog'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<iframe src="' + url + '"></iframe>').open();
}
</script>
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#dukit-public-api">DUKIT Public API</a><ul>
<li><a href="#systems-dukitsystems">Systems (dukit.systems)</a><ul>
<li><a href="#system-methods">System methods</a></li>
</ul>
</li>
<li><a href="#working-with-images-dukititool">Working with images (dukit.itool)</a></li>
<li><a href="#pl-fitting-dukitpl">PL fitting (dukit.pl)</a></li>
<li><a href="#field-calculations-dukitfield">Field calculations (dukit.field)</a><ul>
<li><a href="#defect-methods">Defect methods:</a></li>
</ul>
</li>
<li><a href="#drift-correction-dukitdriftcorrect">Drift correction (dukit.driftcorrect)</a></li>
<li><a href="#magnetic-sample-simulation-dukitmagsim">Magnetic sample simulation (dukit.magsim)</a></li>
<li><a href="#plotting-dukitplot">Plotting (dukit.plot)</a></li>
<li><a href="#some-matplotlib-interactive-widgets-dukitwidget">Some matplotlib interactive widgets (dukit.widget)</a></li>
<li><a href="#polygon-regions-of-image-very-useful-dukitpolygon">Polygon regions of image, very useful! (dukit.polygon)</a></li>
<li><a href="#fourier-tooling-dukitfourier">Fourier tooling (dukit.fourier)</a></li>
<li><a href="#other-dukitshare">Other (dukit.share)</a></li>
</ul>
</li>
</ul>
</div>
<ul id="index">
<li><h3><a href="#header-submodules">Sub-modules</a></h3>
<ul>
<li><code><a title="dukit.driftcorrect" href="driftcorrect.html">dukit.driftcorrect</a></code></li>
<li><code><a title="dukit.field" href="field/index.html">dukit.field</a></code></li>
<li><code><a title="dukit.fourier" href="fourier.html">dukit.fourier</a></code></li>
<li><code><a title="dukit.geom" href="geom.html">dukit.geom</a></code></li>
<li><code><a title="dukit.itool" href="itool.html">dukit.itool</a></code></li>
<li><code><a title="dukit.json2dict" href="json2dict.html">dukit.json2dict</a></code></li>
<li><code><a title="dukit.magsim" href="magsim.html">dukit.magsim</a></code></li>
<li><code><a title="dukit.pl" href="pl/index.html">dukit.pl</a></code></li>
<li><code><a title="dukit.plot" href="plot.html">dukit.plot</a></code></li>
<li><code><a title="dukit.polygon" href="polygon.html">dukit.polygon</a></code></li>
<li><code><a title="dukit.rebin" href="rebin.html">dukit.rebin</a></code></li>
<li><code><a title="dukit.share" href="share.html">dukit.share</a></code></li>
<li><code><a title="dukit.systems" href="systems.html">dukit.systems</a></code></li>
<li><code><a title="dukit.warn" href="warn.html">dukit.warn</a></code></li>
<li><code><a title="dukit.widget" href="widget.html">dukit.widget</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>